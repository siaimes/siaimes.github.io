<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<title>BaseArnl: justPathPlanning.cpp</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">BaseArnl
   &#160;<span id="projectnumber">1.9.3</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.1 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="examples.html"><span>Examples</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('justPathPlanning_8cpp-example.html','');});
</script>
<div id="doc-content">
<div class="header">
  <div class="headertitle">
<div class="title">justPathPlanning.cpp</div>  </div>
</div><!--header-->
<div class="contents">
<p>Example which does path planning and following only, but provides servers for remote operation with MobileEyes.This is provided as an example to build on for developing your own localization techniques. Note, the path planning and following will become innacurate without correction of the robot pose from a localization process (use <a class="elRef" doxygen="Aria.tag:../Aria-Reference//" href="../Aria-Reference/classArRobot.html#a8acb66f0b97e77c94adf56afdc86ffa0">ArRobot::moveTo()</a> to correct the robot pose).</p>
<div class="fragment"><div class="line"><span class="preprocessor">#include &quot;Aria.h&quot;</span></div>
<div class="line"><span class="preprocessor">#include &quot;ArNetworking.h&quot;</span></div>
<div class="line"><span class="preprocessor">#include &quot;Arnl.h&quot;</span></div>
<div class="line"></div>
<div class="line"><span class="keywordtype">int</span> </div>
<div class="line">main(<span class="keywordtype">int</span> argc, <span class="keywordtype">char</span> *argv[])</div>
<div class="line">{</div>
<div class="line">  <span class="comment">// Initialize location of Aria, Arnl and their args.</span></div>
<div class="line">  <a name="a0"></a><a class="codeRef" doxygen="Aria.tag:../Aria-Reference//" href="../Aria-Reference/classAria.html#a5361d8684b2cd73c089efecd3d090d20">Aria::init</a>();</div>
<div class="line">  Arnl::init();</div>
<div class="line">  </div>
<div class="line">  <span class="comment">// To initialize, but log to a file, do this instead of the above:</span></div>
<div class="line">  <span class="comment">//ArLog::init(ArLog::File, ArLog::Normal, &quot;log.txt&quot;, true, true);</span></div>
<div class="line">  <span class="comment">//ArLog::init(ArLog::File, ArLog::Verbose);</span></div>
<div class="line"> </div>
<div class="line">  <span class="comment">// The robot object</span></div>
<div class="line">  <a name="_a1"></a><a class="codeRef" doxygen="Aria.tag:../Aria-Reference//" href="../Aria-Reference/classArRobot.html">ArRobot</a> robot;</div>
<div class="line"></div>
<div class="line">  <span class="comment">// Our server</span></div>
<div class="line">  <a name="_a2"></a><a class="codeRef" doxygen="ArNetworking.tag:../ArNetworking-Reference//" href="../ArNetworking-Reference/classArServerBase.html">ArServerBase</a> server;</div>
<div class="line">  </div>
<div class="line">  <span class="comment">// Parse the command line arguments.</span></div>
<div class="line">  <a name="_a3"></a><a class="codeRef" doxygen="Aria.tag:../Aria-Reference//" href="../Aria-Reference/classArArgumentParser.html">ArArgumentParser</a> parser(&amp;argc, argv);</div>
<div class="line"></div>
<div class="line">  <span class="comment">// Set up our simpleConnector</span></div>
<div class="line">  <a name="_a4"></a><a class="codeRef" doxygen="Aria.tag:../Aria-Reference//" href="../Aria-Reference/classArSimpleConnector.html">ArSimpleConnector</a> simpleConnector(&amp;parser);</div>
<div class="line"></div>
<div class="line">  <span class="comment">// Set up our simpleOpener</span></div>
<div class="line">  <a name="_a5"></a><a class="codeRef" doxygen="ArNetworking.tag:../ArNetworking-Reference//" href="../ArNetworking-Reference/classArServerSimpleOpener.html">ArServerSimpleOpener</a> simpleOpener(&amp;parser);</div>
<div class="line"></div>
<div class="line">  <span class="comment">// Set up our client for the central server</span></div>
<div class="line">  <a name="_a6"></a><a class="codeRef" doxygen="ArNetworking.tag:../ArNetworking-Reference//" href="../ArNetworking-Reference/classArClientSwitchManager.html">ArClientSwitchManager</a> clientSwitch(&amp;server, &amp;parser);</div>
<div class="line">    </div>
<div class="line">  <span class="comment">// Load default arguments for this computer (from /etc/Aria.args, environment</span></div>
<div class="line">  <span class="comment">// variables, and other places)</span></div>
<div class="line">  parser.<a name="a7"></a><a class="codeRef" doxygen="Aria.tag:../Aria-Reference//" href="../Aria-Reference/classArArgumentParser.html#a501694b62a7f8b0c3cadd84aeafe1b35">loadDefaultArguments</a>();</div>
<div class="line"></div>
<div class="line">  <span class="comment">// set up a gyro</span></div>
<div class="line">  <a name="_a8"></a><a class="codeRef" doxygen="Aria.tag:../Aria-Reference//" href="../Aria-Reference/classArAnalogGyro.html">ArAnalogGyro</a> gyro(&amp;robot);</div>
<div class="line">  </div>
<div class="line">  <span class="comment">// Parse arguments for the simple connector.</span></div>
<div class="line">  <span class="keywordflow">if</span> (!<a name="a9"></a><a class="codeRef" doxygen="Aria.tag:../Aria-Reference//" href="../Aria-Reference/classAria.html#ab59150570b5e1a426045e45ee43929c3">Aria::parseArgs</a>() || !parser.<a name="a10"></a><a class="codeRef" doxygen="Aria.tag:../Aria-Reference//" href="../Aria-Reference/classArArgumentParser.html#ac3889cbdfa862031c51bf80e06954914">checkHelpAndWarnUnparsed</a>())</div>
<div class="line">  {</div>
<div class="line">    <a name="a11"></a><a class="codeRef" doxygen="Aria.tag:../Aria-Reference//" href="../Aria-Reference/classArLog.html#adb017560cb244d90ed80acc56586a451">ArLog::log</a>(<a name="a12"></a><a class="codeRef" doxygen="Aria.tag:../Aria-Reference//" href="../Aria-Reference/classArLog.html#ac8cc0fb3aa323ab2a1c21340fdd1dce3a7040faf60eeb155eaa85d439b1066ca1">ArLog::Normal</a>, <span class="stringliteral">&quot;\nUsage: %s -map mapfilename\n&quot;</span>, argv[0]);</div>
<div class="line">    <a name="a13"></a><a class="codeRef" doxygen="Aria.tag:../Aria-Reference//" href="../Aria-Reference/classAria.html#a75aefec78ffa23cfab6bdb46754dd991">Aria::logOptions</a>();</div>
<div class="line">    <a name="a14"></a><a class="codeRef" doxygen="Aria.tag:../Aria-Reference//" href="../Aria-Reference/classAria.html#ac29a02c2e6637417bd7a5a5f1513da74">Aria::exit</a>(1);</div>
<div class="line">  }</div>
<div class="line"></div>
<div class="line"></div>
<div class="line">  <span class="comment">// The laser object, will be used if we have one</span></div>
<div class="line">  <a name="_a15"></a><a class="codeRef" doxygen="Aria.tag:../Aria-Reference//" href="../Aria-Reference/classArSick.html">ArSick</a> sick;</div>
<div class="line"></div>
<div class="line">  <span class="comment">// Add the laser to the robot</span></div>
<div class="line">  robot.<a name="a16"></a><a class="codeRef" doxygen="Aria.tag:../Aria-Reference//" href="../Aria-Reference/classArRobot.html#a97d57b28549fdef851c00749a97cc776">addRangeDevice</a>(&amp;sick);</div>
<div class="line"></div>
<div class="line">  <span class="comment">// Sonar, must be added to the robot, used by teleoperation and wander to</span></div>
<div class="line">  <span class="comment">// detect obstacles, and for localization if SONARNL</span></div>
<div class="line">  <a name="_a17"></a><a class="codeRef" doxygen="Aria.tag:../Aria-Reference//" href="../Aria-Reference/classArSonarDevice.html">ArSonarDevice</a> sonarDev;</div>
<div class="line"></div>
<div class="line">  <span class="comment">// Add the sonar to the robot</span></div>
<div class="line">  robot.<a class="codeRef" doxygen="Aria.tag:../Aria-Reference//" href="../Aria-Reference/classArRobot.html#a97d57b28549fdef851c00749a97cc776">addRangeDevice</a>(&amp;sonarDev);</div>
<div class="line">  </div>
<div class="line">  <span class="comment">// Set up where we&#39;ll look for files</span></div>
<div class="line">  <span class="keywordtype">char</span> fileDir[1024];</div>
<div class="line">  <a name="a18"></a><a class="codeRef" doxygen="Aria.tag:../Aria-Reference//" href="../Aria-Reference/classArUtil.html#aecbabfad1cf1062171a0dafe04a2fc0a">ArUtil::addDirectories</a>(fileDir, <span class="keyword">sizeof</span>(fileDir), <a name="a19"></a><a class="codeRef" doxygen="Aria.tag:../Aria-Reference//" href="../Aria-Reference/classAria.html#a3ac48f1fea6b406449c8e498b2d3c513">Aria::getDirectory</a>(), </div>
<div class="line">             <span class="stringliteral">&quot;examples&quot;</span>);</div>
<div class="line">  <a class="codeRef" doxygen="Aria.tag:../Aria-Reference//" href="../Aria-Reference/classArLog.html#adb017560cb244d90ed80acc56586a451">ArLog::log</a>(<a class="codeRef" doxygen="Aria.tag:../Aria-Reference//" href="../Aria-Reference/classArLog.html#ac8cc0fb3aa323ab2a1c21340fdd1dce3a7040faf60eeb155eaa85d439b1066ca1">ArLog::Normal</a>, <span class="stringliteral">&quot;Installation directory is: %s\nMaps directory is: %s\n&quot;</span>, <a class="codeRef" doxygen="Aria.tag:../Aria-Reference//" href="../Aria-Reference/classAria.html#a3ac48f1fea6b406449c8e498b2d3c513">Aria::getDirectory</a>(), fileDir);</div>
<div class="line">  </div>
<div class="line">  <span class="comment">// Set up the map, this will look for files in the examples</span></div>
<div class="line">  <span class="comment">// directory (unless the file name starts with a /, \, or .</span></div>
<div class="line">  <span class="comment">// You can take out the &#39;fileDir&#39; argument to look in the current directory</span></div>
<div class="line">  <span class="comment">// instead</span></div>
<div class="line">  <a name="_a20"></a><a class="codeRef" doxygen="Aria.tag:../Aria-Reference//" href="../Aria-Reference/classArMap.html">ArMap</a> arMap(fileDir);</div>
<div class="line">  <span class="comment">// set it up to ignore empty file names (otherwise the parseFile</span></div>
<div class="line">  <span class="comment">// on the config will fail)</span></div>
<div class="line">  arMap.<a name="a21"></a><a class="codeRef" doxygen="Aria.tag:../Aria-Reference//" href="../Aria-Reference/classArMap.html#a18a54aa69154bdcb1f9b1a0dd1309a11">setIgnoreEmptyFileName</a>(<span class="keyword">true</span>);</div>
<div class="line"></div>
<div class="line">  <span class="comment">// Make the path task planning task</span></div>
<div class="line">  <a name="_a22"></a><a class="code" href="classArPathPlanningTask.html" title="Task that performs path planning and path following in a seperate asynchronous thread.">ArPathPlanningTask</a> pathTask(&amp;robot, &amp;sick, &amp;sonarDev, &amp;arMap);</div>
<div class="line"></div>
<div class="line">  <span class="comment">// Set up things so data can be logged (only do it with the laser</span></div>
<div class="line">  <span class="comment">// since it can overrun a 9600 serial connection which the sonar is</span></div>
<div class="line">  <span class="comment">// more likely to have)</span></div>
<div class="line">  <a name="_a23"></a><a class="codeRef" doxygen="Aria.tag:../Aria-Reference//" href="../Aria-Reference/classArDataLogger.html">ArDataLogger</a> dataLogger(&amp;robot);</div>
<div class="line">  dataLogger.<a name="a24"></a><a class="codeRef" doxygen="Aria.tag:../Aria-Reference//" href="../Aria-Reference/classArDataLogger.html#a28f4fc3cf8955e837378502de3707fda">addToConfig</a>(<a name="a25"></a><a class="codeRef" doxygen="Aria.tag:../Aria-Reference//" href="../Aria-Reference/classAria.html#aa7b554e24d02c753180556a2791e83f2">Aria::getConfig</a>());</div>
<div class="line"></div>
<div class="line">  <span class="comment">// add our logging to the config</span></div>
<div class="line">  <a name="a26"></a><a class="codeRef" doxygen="Aria.tag:../Aria-Reference//" href="../Aria-Reference/classArLog.html#a3605f90c574dc3e66ba3f42222a2f49d">ArLog::addToConfig</a>(<a class="codeRef" doxygen="Aria.tag:../Aria-Reference//" href="../Aria-Reference/classAria.html#aa7b554e24d02c753180556a2791e83f2">Aria::getConfig</a>());</div>
<div class="line"></div>
<div class="line">  <span class="comment">// First open the server </span></div>
<div class="line">  <span class="keywordflow">if</span> (!simpleOpener.<a name="a27"></a><a class="codeRef" doxygen="ArNetworking.tag:../ArNetworking-Reference//" href="../ArNetworking-Reference/classArServerSimpleOpener.html#a6429c1069dee5edc19fb7dc94078bed0">open</a>(&amp;server, fileDir, 240))</div>
<div class="line">  {</div>
<div class="line">    <span class="keywordflow">if</span> (simpleOpener.<a name="a28"></a><a class="codeRef" doxygen="ArNetworking.tag:../ArNetworking-Reference//" href="../ArNetworking-Reference/classArServerSimpleOpener.html#a7416e273f937d9301eb94ed02e04825d">wasUserFileBad</a>())</div>
<div class="line">      <a class="codeRef" doxygen="Aria.tag:../Aria-Reference//" href="../Aria-Reference/classArLog.html#adb017560cb244d90ed80acc56586a451">ArLog::log</a>(<a class="codeRef" doxygen="Aria.tag:../Aria-Reference//" href="../Aria-Reference/classArLog.html#ac8cc0fb3aa323ab2a1c21340fdd1dce3a7040faf60eeb155eaa85d439b1066ca1">ArLog::Normal</a>, <span class="stringliteral">&quot;Bad user file&quot;</span>);</div>
<div class="line">    <span class="keywordflow">else</span></div>
<div class="line">      <a class="codeRef" doxygen="Aria.tag:../Aria-Reference//" href="../Aria-Reference/classArLog.html#adb017560cb244d90ed80acc56586a451">ArLog::log</a>(<a class="codeRef" doxygen="Aria.tag:../Aria-Reference//" href="../Aria-Reference/classArLog.html#ac8cc0fb3aa323ab2a1c21340fdd1dce3a7040faf60eeb155eaa85d439b1066ca1">ArLog::Normal</a>, <span class="stringliteral">&quot;Could not open server port&quot;</span>);</div>
<div class="line">    exit(2);</div>
<div class="line">  }</div>
<div class="line"></div>
<div class="line">  <span class="comment">// Connect the robot</span></div>
<div class="line">  <span class="keywordflow">if</span> (!simpleConnector.<a name="a29"></a><a class="codeRef" doxygen="Aria.tag:../Aria-Reference//" href="../Aria-Reference/classArSimpleConnector.html#aecf2650aabb8fa3c48aed82b947a4a81">connectRobot</a>(&amp;robot))</div>
<div class="line">  {</div>
<div class="line">    <a class="codeRef" doxygen="Aria.tag:../Aria-Reference//" href="../Aria-Reference/classArLog.html#adb017560cb244d90ed80acc56586a451">ArLog::log</a>(<a class="codeRef" doxygen="Aria.tag:../Aria-Reference//" href="../Aria-Reference/classArLog.html#ac8cc0fb3aa323ab2a1c21340fdd1dce3a7040faf60eeb155eaa85d439b1066ca1">ArLog::Normal</a>, <span class="stringliteral">&quot;Could not connect to robot... exiting&quot;</span>);</div>
<div class="line">    <a class="codeRef" doxygen="Aria.tag:../Aria-Reference//" href="../Aria-Reference/classAria.html#ac29a02c2e6637417bd7a5a5f1513da74">Aria::exit</a>(3);</div>
<div class="line">  }</div>
<div class="line"></div>
<div class="line">  <span class="comment">// Set up a class that&#39;ll put the movement and gyro parameters into ArConfig</span></div>
<div class="line">  <a name="_a30"></a><a class="codeRef" doxygen="Aria.tag:../Aria-Reference//" href="../Aria-Reference/classArRobotConfig.html">ArRobotConfig</a> robotConfig(&amp;robot);</div>
<div class="line">  robotConfig.<a name="a31"></a><a class="codeRef" doxygen="Aria.tag:../Aria-Reference//" href="../Aria-Reference/classArRobotConfig.html#a2656738860ce40f9a6e6d6235ccdcef3">addAnalogGyro</a>(&amp;gyro);</div>
<div class="line"></div>
<div class="line">  robot.<a name="a32"></a><a class="codeRef" doxygen="Aria.tag:../Aria-Reference//" href="../Aria-Reference/group__easy.html#gaa3657bebab0086dd14ed0c8c3f76dc8b">enableMotors</a>();</div>
<div class="line">  robot.<a name="a33"></a><a class="codeRef" doxygen="Aria.tag:../Aria-Reference//" href="../Aria-Reference/classArRobot.html#a5b1b947ef2e28d171f023b1bbe5d02a9">clearDirectMotion</a>();</div>
<div class="line"></div>
<div class="line">  <span class="comment">// if we are connected to a simulator, reset it to its start position</span></div>
<div class="line">  robot.<a name="a34"></a><a class="codeRef" doxygen="Aria.tag:../Aria-Reference//" href="../Aria-Reference/classArRobot.html#aceef80a6274fb34aafcc422e4b1778c1">comInt</a>(<a name="a35"></a><a class="codeRef" doxygen="Aria.tag:../Aria-Reference//" href="../Aria-Reference/classArCommands.html#a9a31f904a95bbc31d8b33c6637100cc4aa0c706a0926dbcfd4cc9b87a47733441">ArCommands::RESETSIMTOORIGIN</a>, 1);</div>
<div class="line">  robot.<a name="a36"></a><a class="codeRef" doxygen="Aria.tag:../Aria-Reference//" href="../Aria-Reference/classArRobot.html#a8acb66f0b97e77c94adf56afdc86ffa0">moveTo</a>(<a name="_a37"></a><a class="codeRef" doxygen="Aria.tag:../Aria-Reference//" href="../Aria-Reference/classArPose.html">ArPose</a>(0,0,0));</div>
<div class="line"></div>
<div class="line"></div>
<div class="line">  <span class="comment">// Set up laser using connector (command line arguments, etc.)</span></div>
<div class="line">  simpleConnector.<a name="a38"></a><a class="codeRef" doxygen="Aria.tag:../Aria-Reference//" href="../Aria-Reference/classArSimpleConnector.html#a65077c5b87275de54ea7cb05b4c7121b">setupLaser</a>(&amp;sick);</div>
<div class="line"></div>
<div class="line">  <span class="comment">// Start the robot thread.</span></div>
<div class="line">  robot.<a name="a39"></a><a class="codeRef" doxygen="Aria.tag:../Aria-Reference//" href="../Aria-Reference/classArRobot.html#a3c3d878cfd11a2ef91230005a83bfcaa">runAsync</a>(<span class="keyword">true</span>);</div>
<div class="line">  </div>
<div class="line">  <span class="comment">// Start the laser thread.</span></div>
<div class="line">  sick.<a name="a40"></a><a class="codeRef" doxygen="Aria.tag:../Aria-Reference//" href="../Aria-Reference/classArRangeDeviceThreaded.html#a62cb8f9af9c0152fe228ac59724c89c6">runAsync</a>();</div>
<div class="line"></div>
<div class="line">  <span class="comment">// Try to connect the laser</span></div>
<div class="line">  <span class="keywordflow">if</span> (!sick.<a name="a41"></a><a class="codeRef" doxygen="Aria.tag:../Aria-Reference//" href="../Aria-Reference/classArLMS2xx.html#a52cb16362f162b8869eb4dea511de230">blockingConnect</a>())</div>
<div class="line">    <a class="codeRef" doxygen="Aria.tag:../Aria-Reference//" href="../Aria-Reference/classArLog.html#adb017560cb244d90ed80acc56586a451">ArLog::log</a>(<a class="codeRef" doxygen="Aria.tag:../Aria-Reference//" href="../Aria-Reference/classArLog.html#ac8cc0fb3aa323ab2a1c21340fdd1dce3a7040faf60eeb155eaa85d439b1066ca1">ArLog::Normal</a>, <span class="stringliteral">&quot;Warning: Couldn&#39;t connect to SICK laser, it won&#39;t be used&quot;</span>);</div>
<div class="line">  <span class="keywordflow">else</span></div>
<div class="line">    <a class="codeRef" doxygen="Aria.tag:../Aria-Reference//" href="../Aria-Reference/classArLog.html#adb017560cb244d90ed80acc56586a451">ArLog::log</a>(<a class="codeRef" doxygen="Aria.tag:../Aria-Reference//" href="../Aria-Reference/classArLog.html#ac8cc0fb3aa323ab2a1c21340fdd1dce3a7040faf60eeb155eaa85d439b1066ca1">ArLog::Normal</a>, <span class="stringliteral">&quot;Connected to laser.&quot;</span>);</div>
<div class="line"></div>
<div class="line"></div>
<div class="line">  <span class="comment">// Add additional range devices to the robot and path planning task.</span></div>
<div class="line">  <span class="comment">// IRs if the robot has them.</span></div>
<div class="line">  robot.<a name="a42"></a><a class="codeRef" doxygen="Aria.tag:../Aria-Reference//" href="../Aria-Reference/classArRobot.html#a5aecc7ac998c9a31b82fdb904efa8609">lock</a>();</div>
<div class="line">  <a name="_a43"></a><a class="codeRef" doxygen="Aria.tag:../Aria-Reference//" href="../Aria-Reference/classArIRs.html">ArIRs</a> irs;</div>
<div class="line">  robot.<a class="codeRef" doxygen="Aria.tag:../Aria-Reference//" href="../Aria-Reference/classArRobot.html#a97d57b28549fdef851c00749a97cc776">addRangeDevice</a>(&amp;irs);</div>
<div class="line">  pathTask.<a name="a44"></a><a class="code" href="classArPathPlanningTask.html#ab1e8ead6120416bf3837417467637ab8" title="Adds a range sensing device.">addRangeDevice</a>(&amp;irs, <a name="a45"></a><a class="code" href="classArPathPlanningTask.html#a875d3414ba11ffb584fcb0a71925c9c1a2a5147c60a29a83554a68187a46bfad5" title="Current buffer only.">ArPathPlanningTask::CURRENT</a>);</div>
<div class="line"></div>
<div class="line">  <span class="comment">// Bumpers.</span></div>
<div class="line">  <a name="_a46"></a><a class="codeRef" doxygen="Aria.tag:../Aria-Reference//" href="../Aria-Reference/classArBumpers.html">ArBumpers</a> bumpers;</div>
<div class="line">  robot.<a class="codeRef" doxygen="Aria.tag:../Aria-Reference//" href="../Aria-Reference/classArRobot.html#a97d57b28549fdef851c00749a97cc776">addRangeDevice</a>(&amp;bumpers);</div>
<div class="line">  pathTask.<a class="code" href="classArPathPlanningTask.html#ab1e8ead6120416bf3837417467637ab8" title="Adds a range sensing device.">addRangeDevice</a>(&amp;bumpers, <a class="code" href="classArPathPlanningTask.html#a875d3414ba11ffb584fcb0a71925c9c1a2a5147c60a29a83554a68187a46bfad5" title="Current buffer only.">ArPathPlanningTask::CURRENT</a>);</div>
<div class="line"></div>
<div class="line">  <span class="comment">// Forbidden regions from the map</span></div>
<div class="line">  <a name="_a47"></a><a class="codeRef" doxygen="Aria.tag:../Aria-Reference//" href="../Aria-Reference/classArForbiddenRangeDevice.html">ArForbiddenRangeDevice</a> forbidden(&amp;arMap);</div>
<div class="line">  robot.<a class="codeRef" doxygen="Aria.tag:../Aria-Reference//" href="../Aria-Reference/classArRobot.html#a97d57b28549fdef851c00749a97cc776">addRangeDevice</a>(&amp;forbidden);</div>
<div class="line">  pathTask.<a class="code" href="classArPathPlanningTask.html#ab1e8ead6120416bf3837417467637ab8" title="Adds a range sensing device.">addRangeDevice</a>(&amp;forbidden, <a class="code" href="classArPathPlanningTask.html#a875d3414ba11ffb584fcb0a71925c9c1a2a5147c60a29a83554a68187a46bfad5" title="Current buffer only.">ArPathPlanningTask::CURRENT</a>);</div>
<div class="line"></div>
<div class="line">  <span class="comment">// This is the place to add a range device which will hold sensor data</span></div>
<div class="line">  <span class="comment">// and delete it appropriately to replan around blocked paths.</span></div>
<div class="line">  <a name="_a48"></a><a class="code" href="classArGlobalReplanningRangeDevice.html">ArGlobalReplanningRangeDevice</a> replanDev(&amp;pathTask);</div>
<div class="line"></div>
<div class="line">  <span class="comment">// Create objects that add network services:</span></div>
<div class="line">  </div>
<div class="line">  <span class="comment">// Drawing in the map display:</span></div>
<div class="line">  <a name="_a49"></a><a class="codeRef" doxygen="ArNetworking.tag:../ArNetworking-Reference//" href="../ArNetworking-Reference/classArServerInfoDrawings.html">ArServerInfoDrawings</a> drawings(&amp;server);</div>
<div class="line">  drawings.<a name="a50"></a><a class="codeRef" doxygen="ArNetworking.tag:../ArNetworking-Reference//" href="../ArNetworking-Reference/classArServerInfoDrawings.html#afce43fb3fd0324b092600c9eb6fb50a7">addRobotsRangeDevices</a>(&amp;robot);</div>
<div class="line">  drawings.<a name="a51"></a><a class="codeRef" doxygen="ArNetworking.tag:../ArNetworking-Reference//" href="../ArNetworking-Reference/classArServerInfoDrawings.html#a6f445808f6921e3dd81f9f97ca702cf4">addRangeDevice</a>(&amp;replanDev);</div>
<div class="line"></div>
<div class="line">  <span class="comment">/* If you want to draw the destination put this code back in:</span></div>
<div class="line"><span class="comment">  ArServerDrawingDestination destination(</span></div>
<div class="line"><span class="comment">      &amp;drawings, &amp;pathTask, &quot;destination&quot;,</span></div>
<div class="line"><span class="comment">      500, 500,</span></div>
<div class="line"><span class="comment">      new ArDrawingData(&quot;polyDots&quot;,</span></div>
<div class="line"><span class="comment">                ArColor(0xff, 0xff, 0x0),</span></div>
<div class="line"><span class="comment">                800, // size</span></div>
<div class="line"><span class="comment">                49), // just below the robot</span></div>
<div class="line"><span class="comment">  */</span></div>
<div class="line"></div>
<div class="line">  <span class="comment">/* If you want to see the local path planning area use this </span></div>
<div class="line"><span class="comment">    (You can enable this particular drawing from custom commands </span></div>
<div class="line"><span class="comment">    which is set up down below in ArServerInfoPath) </span></div>
<div class="line"><span class="comment">  ArDrawingData drawingDataP(&quot;polyLine&quot;, ArColor(200,200,200), 1, 75);</span></div>
<div class="line"><span class="comment">  ArFunctor2C&lt;ArPathPlanningTask, ArServerClient *, ArNetPacket *&gt; </span></div>
<div class="line"><span class="comment">  drawingFunctorP(pathTask, &amp;ArPathPlanningTask::drawSearchRectangle);</span></div>
<div class="line"><span class="comment">  drawings.addDrawing(&amp;drawingDataP, &quot;Local Plan Area&quot;, &amp;drawingFunctorP); </span></div>
<div class="line"><span class="comment">  */</span></div>
<div class="line"></div>
<div class="line">  <span class="comment">/* If you want to see the points making up the local path in addition to the</span></div>
<div class="line"><span class="comment">   * main path use this. </span></div>
<div class="line"><span class="comment">  ArDrawingData drawingDataP2(&quot;polyDots&quot;, ArColor(0,128,0), 100, 70);</span></div>
<div class="line"><span class="comment">  ArFunctor2C&lt;ArPathPlanningTask, ArServerClient *, ArNetPacket *&gt; </span></div>
<div class="line"><span class="comment">  drawingFunctorP2(pathTask, &amp;ArPathPlanningTask::drawPathPoints);</span></div>
<div class="line"><span class="comment">  drawings.addDrawing(&amp;drawingDataP2, &quot;Path Points&quot;, &amp;drawingFunctorP2);</span></div>
<div class="line"><span class="comment">  */</span></div>
<div class="line"></div>
<div class="line">  <span class="comment">// Misc. simple commands:</span></div>
<div class="line">  <a name="_a52"></a><a class="codeRef" doxygen="ArNetworking.tag:../ArNetworking-Reference//" href="../ArNetworking-Reference/classArServerHandlerCommands.html">ArServerHandlerCommands</a> commands(&amp;server);</div>
<div class="line"></div>
<div class="line"></div>
<div class="line">  <span class="comment">// These provide various kinds of information to the client:</span></div>
<div class="line">  <a name="_a53"></a><a class="codeRef" doxygen="ArNetworking.tag:../ArNetworking-Reference//" href="../ArNetworking-Reference/classArServerInfoRobot.html">ArServerInfoRobot</a> serverInfoRobot(&amp;server, &amp;robot);</div>
<div class="line">  <a name="_a54"></a><a class="codeRef" doxygen="ArNetworking.tag:../ArNetworking-Reference//" href="../ArNetworking-Reference/classArServerInfoSensor.html">ArServerInfoSensor</a> serverInfoSensor(&amp;server, &amp;robot);</div>
<div class="line">  <a name="_a55"></a><a class="code" href="classArServerInfoPath.html" title="Sends path information to the client.">ArServerInfoPath</a> serverInfoPath(&amp;server, &amp;robot, &amp;pathTask);</div>
<div class="line">  serverInfoPath.<a name="a56"></a><a class="code" href="classArServerInfoPath.html#a6c5a8feafa4565c2e375c98ce3b673e3" title="Adds the search area drawing.">addSearchRectangleDrawing</a>(&amp;drawings);</div>
<div class="line">  serverInfoPath.<a name="a57"></a><a class="code" href="classArServerInfoPath.html#a43abdc2b7b7ec891f85fbaab7061a358" title="Adds the simple commands to turn on and off the search rectangle.">addControlCommands</a>(&amp;commands);</div>
<div class="line"></div>
<div class="line">  <span class="comment">// Provide the map to the client (and related controls):</span></div>
<div class="line">  <span class="comment">// This uses both lines and points now, since everything except</span></div>
<div class="line">  <span class="comment">// sonar localization uses both (path planning with sonar still uses both)</span></div>
<div class="line">  <a name="_a58"></a><a class="codeRef" doxygen="ArNetworking.tag:../ArNetworking-Reference//" href="../ArNetworking-Reference/classArServerHandlerMap.html">ArServerHandlerMap</a> serverMap(&amp;server, &amp;arMap);</div>
<div class="line"></div>
<div class="line">  </div>
<div class="line"></div>
<div class="line">  <span class="comment">// Add some simple (custom) commands for testing and debugging:</span></div>
<div class="line">  <a name="_a59"></a><a class="codeRef" doxygen="ArNetworking.tag:../ArNetworking-Reference//" href="../ArNetworking-Reference/classArServerSimpleComUC.html">ArServerSimpleComUC</a> uCCommands(&amp;commands, &amp;robot);                   <span class="comment">// Send any command to the microcontroller</span></div>
<div class="line">  <a name="_a60"></a><a class="codeRef" doxygen="ArNetworking.tag:../ArNetworking-Reference//" href="../ArNetworking-Reference/classArServerSimpleComMovementLogging.html">ArServerSimpleComMovementLogging</a> loggingCommands(&amp;commands, &amp;robot); <span class="comment">// configure logging</span></div>
<div class="line">  <a name="_a61"></a><a class="codeRef" doxygen="ArNetworking.tag:../ArNetworking-Reference//" href="../ArNetworking-Reference/classArServerSimpleComGyro.html">ArServerSimpleComGyro</a> gyroCommands(&amp;commands, &amp;robot, &amp;gyro);        <span class="comment">// monitor the gyro</span></div>
<div class="line">  <a name="_a62"></a><a class="codeRef" doxygen="ArNetworking.tag:../ArNetworking-Reference//" href="../ArNetworking-Reference/classArServerSimpleComLogRobotConfig.html">ArServerSimpleComLogRobotConfig</a> configCommands(&amp;commands, &amp;robot);   <span class="comment">// trigger logging of the robot config parameters</span></div>
<div class="line">  ArServerSimpleServerCommands serverCommands(&amp;commands, &amp;server);     <span class="comment">// monitor networking behavior (track packets sent etc.)</span></div>
<div class="line"></div>
<div class="line"></div>
<div class="line">  <span class="comment">/* Set up the possible modes for remote control from a client such as</span></div>
<div class="line"><span class="comment">   * MobileEyes:</span></div>
<div class="line"><span class="comment">   */</span></div>
<div class="line"></div>
<div class="line">  <span class="comment">// Mode To go to a goal or other specific point:</span></div>
<div class="line">  <a name="_a63"></a><a class="code" href="classArServerModeGoto.html" title="Handles requests to go to a goal or point, to go to the home point, or to tour all goals...">ArServerModeGoto</a> modeGoto(&amp;server, &amp;robot, &amp;pathTask, &amp;arMap, <a class="codeRef" doxygen="Aria.tag:../Aria-Reference//" href="../Aria-Reference/classArPose.html">ArPose</a>(0,0,0));</div>
<div class="line"></div>
<div class="line">  <span class="comment">// Add a simple (custom) command that allows you to give a list of </span></div>
<div class="line">  <span class="comment">// goals to tour, instead of all. Useful for testing and debugging.</span></div>
<div class="line">  modeGoto.<a name="a64"></a><a class="code" href="classArServerModeGoto.html#afbd42b7b40058cd0c2f849103a40e9b8" title="Add a &quot;tour&quot; command to the given &quot;simple commands&quot; object.">addTourGoalsInListSimpleCommand</a>(&amp;commands);</div>
<div class="line"></div>
<div class="line">  <span class="comment">// Mode To stop and remain stopped:</span></div>
<div class="line">  ArServerModeStop modeStop(&amp;server, &amp;robot);</div>
<div class="line"></div>
<div class="line">  <span class="comment">// cause the sonar to turn off automatically</span></div>
<div class="line">  <span class="comment">// when the robot is stopped, and turn it back on when commands to move</span></div>
<div class="line">  <span class="comment">// are sent. (Note, this should not be done if you need the sonar</span></div>
<div class="line">  <span class="comment">// data to localize, or for other purposes while stopped)</span></div>
<div class="line">  ArSonarAutoDisabler sonarAutoDisabler(&amp;robot);</div>
<div class="line"></div>
<div class="line">  <span class="comment">// Teleoperation modes To drive by keyboard, joystick, etc:</span></div>
<div class="line">  ArServerModeRatioDrive modeRatioDrive(&amp;server, &amp;robot);  <span class="comment">// New, improved mode</span></div>
<div class="line">  ArServerModeDrive modeDrive(&amp;server, &amp;robot);            <span class="comment">// Older mode for compatability</span></div>
<div class="line"></div>
<div class="line">  <span class="comment">// Drive mode&#39;s configuration and custom (simple) commands:</span></div>
<div class="line">  modeRatioDrive.addToConfig(<a class="codeRef" doxygen="Aria.tag:../Aria-Reference//" href="../Aria-Reference/classAria.html#aa7b554e24d02c753180556a2791e83f2">Aria::getConfig</a>(), <span class="stringliteral">&quot;Teleop settings&quot;</span>);</div>
<div class="line">  modeDrive.addControlCommands(&amp;commands);</div>
<div class="line">  modeRatioDrive.addControlCommands(&amp;commands);</div>
<div class="line"></div>
<div class="line">  <span class="comment">// Wander mode </span></div>
<div class="line">  ArServerModeWander modeWander(&amp;server, &amp;robot);</div>
<div class="line"></div>
<div class="line"></div>
<div class="line">  <span class="comment">// This provides a small table of interesting information for the client</span></div>
<div class="line">  <span class="comment">// to display to the operator:</span></div>
<div class="line">  <a name="_a65"></a><a class="codeRef" doxygen="ArNetworking.tag:../ArNetworking-Reference//" href="../ArNetworking-Reference/classArServerInfoStrings.html">ArServerInfoStrings</a> stringInfo(&amp;server);</div>
<div class="line">  <a name="a66"></a><a class="codeRef" doxygen="Aria.tag:../Aria-Reference//" href="../Aria-Reference/classAria.html#a7fa08d5497e245060c16644b9747ffff">Aria::getInfoGroup</a>()-&gt;<a name="a67"></a><a class="codeRef" doxygen="Aria.tag:../Aria-Reference//" href="../Aria-Reference/classArStringInfoGroup.html#a1e1784e772af0d6318ade1fe309f11db">addAddStringCallback</a>(stringInfo.<a name="a68"></a><a class="codeRef" doxygen="ArNetworking.tag:../ArNetworking-Reference//" href="../ArNetworking-Reference/classArServerInfoStrings.html#a2c5ebea58bca4a8ad16ce5368e6f668c">getAddStringFunctor</a>());</div>
<div class="line">  </div>
<div class="line">  <a class="codeRef" doxygen="Aria.tag:../Aria-Reference//" href="../Aria-Reference/classAria.html#a7fa08d5497e245060c16644b9747ffff">Aria::getInfoGroup</a>()-&gt;<a name="a69"></a><a class="codeRef" doxygen="Aria.tag:../Aria-Reference//" href="../Aria-Reference/classArStringInfoGroup.html#a162b4a2e028e476787e5b2d1be532525">addStringInt</a>(</div>
<div class="line">      <span class="stringliteral">&quot;Motor Packet Count&quot;</span>, 10, </div>
<div class="line">      <span class="keyword">new</span> <a name="_a70"></a><a class="codeRef" doxygen="Aria.tag:../Aria-Reference//" href="../Aria-Reference/classArConstRetFunctorC.html">ArConstRetFunctorC&lt;int, ArRobot&gt;</a>(&amp;robot, </div>
<div class="line">                           &amp;<a name="a71"></a><a class="codeRef" doxygen="Aria.tag:../Aria-Reference//" href="../Aria-Reference/classArRobot.html#a9eb53fc27147cd3467fa3254cbb829f0">ArRobot::getMotorPacCount</a>));</div>
<div class="line"></div>
<div class="line"></div>
<div class="line">  <span class="comment">// Make Stop mode the default (If current mode deactivates without entering</span></div>
<div class="line">  <span class="comment">// a new mode, then Stop Mode will be selected)</span></div>
<div class="line">  modeStop.addAsDefaultMode();</div>
<div class="line"></div>
<div class="line"></div>
<div class="line"></div>
<div class="line"></div>
<div class="line">  <span class="comment">/* File transfer services: */</span></div>
<div class="line">  </div>
<div class="line"><span class="preprocessor">#ifdef WIN32</span></div>
<div class="line"><span class="preprocessor"></span>  <span class="comment">// these server file things don&#39;t work under windows yet</span></div>
<div class="line">  <a class="codeRef" doxygen="Aria.tag:../Aria-Reference//" href="../Aria-Reference/classArLog.html#adb017560cb244d90ed80acc56586a451">ArLog::log</a>(<a class="codeRef" doxygen="Aria.tag:../Aria-Reference//" href="../Aria-Reference/classArLog.html#ac8cc0fb3aa323ab2a1c21340fdd1dce3a7040faf60eeb155eaa85d439b1066ca1">ArLog::Normal</a>, <span class="stringliteral">&quot;Note, file upload/download services are not implemented for Windows; not enabling them.&quot;</span>);</div>
<div class="line"><span class="preprocessor">#else</span></div>
<div class="line"><span class="preprocessor"></span>  <span class="comment">// This block will allow you to set up where you get and put files</span></div>
<div class="line">  <span class="comment">// to/from, just comment them out if you don&#39;t want this to happen</span></div>
<div class="line">  <span class="comment">// /*</span></div>
<div class="line">  <a name="_a72"></a><a class="codeRef" doxygen="ArNetworking.tag:../ArNetworking-Reference//" href="../ArNetworking-Reference/classArServerFileLister.html">ArServerFileLister</a> fileLister(&amp;server, fileDir);</div>
<div class="line">  <a name="_a73"></a><a class="codeRef" doxygen="ArNetworking.tag:../ArNetworking-Reference//" href="../ArNetworking-Reference/classArServerFileToClient.html">ArServerFileToClient</a> fileToClient(&amp;server, fileDir);</div>
<div class="line">  <a name="_a74"></a><a class="codeRef" doxygen="ArNetworking.tag:../ArNetworking-Reference//" href="../ArNetworking-Reference/classArServerFileFromClient.html">ArServerFileFromClient</a> fileFromClient(&amp;server, fileDir, <span class="stringliteral">&quot;/tmp&quot;</span>);</div>
<div class="line">  <a name="_a75"></a><a class="codeRef" doxygen="ArNetworking.tag:../ArNetworking-Reference//" href="../ArNetworking-Reference/classArServerDeleteFileOnServer.html">ArServerDeleteFileOnServer</a> deleteFileOnServer(&amp;server, fileDir);</div>
<div class="line">  <span class="comment">// */</span></div>
<div class="line"><span class="preprocessor">#endif</span></div>
<div class="line"><span class="preprocessor"></span></div>
<div class="line">  <span class="comment">// Create the service that allows the client to monitor the communication </span></div>
<div class="line">  <span class="comment">// between the robot and the client.</span></div>
<div class="line">  <span class="comment">//</span></div>
<div class="line">  <a name="_a76"></a><a class="codeRef" doxygen="ArNetworking.tag:../ArNetworking-Reference//" href="../ArNetworking-Reference/classArServerHandlerCommMonitor.html">ArServerHandlerCommMonitor</a> handlerCommMonitor(&amp;server);</div>
<div class="line"></div>
<div class="line">  <span class="comment">// Create service that allows client to change configuration parameters in ArConfig </span></div>
<div class="line">  <a name="_a77"></a><a class="codeRef" doxygen="ArNetworking.tag:../ArNetworking-Reference//" href="../ArNetworking-Reference/classArServerHandlerConfig.html">ArServerHandlerConfig</a> handlerConfig(&amp;server, <a class="codeRef" doxygen="Aria.tag:../Aria-Reference//" href="../Aria-Reference/classAria.html#aa7b554e24d02c753180556a2791e83f2">Aria::getConfig</a>(),</div>
<div class="line">                      Arnl::getTypicalDefaultParamFileName(),</div>
<div class="line">                      <a class="codeRef" doxygen="Aria.tag:../Aria-Reference//" href="../Aria-Reference/classAria.html#a3ac48f1fea6b406449c8e498b2d3c513">Aria::getDirectory</a>());</div>
<div class="line"></div>
<div class="line"></div>
<div class="line">  </div>
<div class="line">  <span class="comment">// Read in parameter files.</span></div>
<div class="line">  <a class="codeRef" doxygen="Aria.tag:../Aria-Reference//" href="../Aria-Reference/classAria.html#aa7b554e24d02c753180556a2791e83f2">Aria::getConfig</a>()-&gt;<a name="a78"></a><a class="codeRef" doxygen="Aria.tag:../Aria-Reference//" href="../Aria-Reference/classArConfig.html#a9e01acebbebaf4f6c9dc01032c1016d2">useArgumentParser</a>(&amp;parser);</div>
<div class="line">  <span class="keywordflow">if</span> (!<a class="codeRef" doxygen="Aria.tag:../Aria-Reference//" href="../Aria-Reference/classAria.html#aa7b554e24d02c753180556a2791e83f2">Aria::getConfig</a>()-&gt;parseFile(Arnl::getTypicalParamFileName()))</div>
<div class="line">  {</div>
<div class="line">    <a class="codeRef" doxygen="Aria.tag:../Aria-Reference//" href="../Aria-Reference/classArLog.html#adb017560cb244d90ed80acc56586a451">ArLog::log</a>(<a class="codeRef" doxygen="Aria.tag:../Aria-Reference//" href="../Aria-Reference/classArLog.html#ac8cc0fb3aa323ab2a1c21340fdd1dce3a7040faf60eeb155eaa85d439b1066ca1">ArLog::Normal</a>, <span class="stringliteral">&quot;Trouble loading configuration file, exiting&quot;</span>);</div>
<div class="line">    <a class="codeRef" doxygen="Aria.tag:../Aria-Reference//" href="../Aria-Reference/classAria.html#ac29a02c2e6637417bd7a5a5f1513da74">Aria::exit</a>(5);</div>
<div class="line">  }</div>
<div class="line"></div>
<div class="line">  <span class="comment">// Warn about unknown params.</span></div>
<div class="line">  <span class="keywordflow">if</span> (!simpleOpener.<a name="a79"></a><a class="codeRef" doxygen="ArNetworking.tag:../ArNetworking-Reference//" href="../ArNetworking-Reference/classArServerSimpleOpener.html#ad05fedc301ab89072e61879999463d17">checkAndLog</a>() || !parser.<a class="codeRef" doxygen="Aria.tag:../Aria-Reference//" href="../Aria-Reference/classArArgumentParser.html#ac3889cbdfa862031c51bf80e06954914">checkHelpAndWarnUnparsed</a>())</div>
<div class="line">  {</div>
<div class="line">    <a class="codeRef" doxygen="Aria.tag:../Aria-Reference//" href="../Aria-Reference/classArLog.html#adb017560cb244d90ed80acc56586a451">ArLog::log</a>(<a class="codeRef" doxygen="Aria.tag:../Aria-Reference//" href="../Aria-Reference/classArLog.html#ac8cc0fb3aa323ab2a1c21340fdd1dce3a7040faf60eeb155eaa85d439b1066ca1">ArLog::Normal</a>, <span class="stringliteral">&quot;\nUsage: %s -map mapfilename\n&quot;</span>, argv[0]);</div>
<div class="line">    simpleConnector.<a name="a80"></a><a class="codeRef" doxygen="Aria.tag:../Aria-Reference//" href="../Aria-Reference/classArSimpleConnector.html#ae740e5c073af8db20af761c13766463d">logOptions</a>();</div>
<div class="line">    simpleOpener.<a name="a81"></a><a class="codeRef" doxygen="ArNetworking.tag:../ArNetworking-Reference//" href="../ArNetworking-Reference/classArServerSimpleOpener.html#abf0eceb61b0aa727cce24d27e8362bf3">logOptions</a>();</div>
<div class="line">    <a class="codeRef" doxygen="Aria.tag:../Aria-Reference//" href="../Aria-Reference/classAria.html#ac29a02c2e6637417bd7a5a5f1513da74">Aria::exit</a>(6);</div>
<div class="line">  }</div>
<div class="line"></div>
<div class="line">  <span class="comment">// Warn if there is no map</span></div>
<div class="line">  <span class="keywordflow">if</span> (arMap.<a name="a82"></a><a class="codeRef" doxygen="Aria.tag:../Aria-Reference//" href="../Aria-Reference/classArMap.html#aef54377341363e9da80ec816d708d0f7">getFileName</a>() == NULL || strlen(arMap.<a class="codeRef" doxygen="Aria.tag:../Aria-Reference//" href="../Aria-Reference/classArMap.html#aef54377341363e9da80ec816d708d0f7">getFileName</a>()) &lt;= 0)</div>
<div class="line">  {</div>
<div class="line">    <a class="codeRef" doxygen="Aria.tag:../Aria-Reference//" href="../Aria-Reference/classArLog.html#adb017560cb244d90ed80acc56586a451">ArLog::log</a>(<a class="codeRef" doxygen="Aria.tag:../Aria-Reference//" href="../Aria-Reference/classArLog.html#ac8cc0fb3aa323ab2a1c21340fdd1dce3a7040faf60eeb155eaa85d439b1066ca1">ArLog::Normal</a>, <span class="stringliteral">&quot;&quot;</span>);</div>
<div class="line">    <a class="codeRef" doxygen="Aria.tag:../Aria-Reference//" href="../Aria-Reference/classArLog.html#adb017560cb244d90ed80acc56586a451">ArLog::log</a>(<a class="codeRef" doxygen="Aria.tag:../Aria-Reference//" href="../Aria-Reference/classArLog.html#ac8cc0fb3aa323ab2a1c21340fdd1dce3a7040faf60eeb155eaa85d439b1066ca1">ArLog::Normal</a>, <span class="stringliteral">&quot;### Warning, No map file is set up, you can make a map with sickLogger or arnlServer, and Mapper3; More info in docs/Mapping.txt and README.txt. Set the map with the -map command line option, or by changing the config with MobileEyes or by editing the config file.&quot;</span>);</div>
<div class="line">    <a class="codeRef" doxygen="Aria.tag:../Aria-Reference//" href="../Aria-Reference/classArLog.html#adb017560cb244d90ed80acc56586a451">ArLog::log</a>(<a class="codeRef" doxygen="Aria.tag:../Aria-Reference//" href="../Aria-Reference/classArLog.html#ac8cc0fb3aa323ab2a1c21340fdd1dce3a7040faf60eeb155eaa85d439b1066ca1">ArLog::Normal</a>, <span class="stringliteral">&quot;&quot;</span>);    </div>
<div class="line">  }</div>
<div class="line"></div>
<div class="line">  <span class="comment">// find out where we&#39;ll want to put files</span></div>
<div class="line">  <a class="codeRef" doxygen="Aria.tag:../Aria-Reference//" href="../Aria-Reference/classArLog.html#adb017560cb244d90ed80acc56586a451">ArLog::log</a>(<a class="codeRef" doxygen="Aria.tag:../Aria-Reference//" href="../Aria-Reference/classArLog.html#ac8cc0fb3aa323ab2a1c21340fdd1dce3a7040faf60eeb155eaa85d439b1066ca1">ArLog::Normal</a>, <span class="stringliteral">&quot;&quot;</span>);</div>
<div class="line">  <a class="codeRef" doxygen="Aria.tag:../Aria-Reference//" href="../Aria-Reference/classArLog.html#adb017560cb244d90ed80acc56586a451">ArLog::log</a>(<a class="codeRef" doxygen="Aria.tag:../Aria-Reference//" href="../Aria-Reference/classArLog.html#ac8cc0fb3aa323ab2a1c21340fdd1dce3a7040faf60eeb155eaa85d439b1066ca1">ArLog::Normal</a>, </div>
<div class="line">         <span class="stringliteral">&quot;Directory for maps and file serving: %s&quot;</span>, fileDir);</div>
<div class="line">  </div>
<div class="line">  <a class="codeRef" doxygen="Aria.tag:../Aria-Reference//" href="../Aria-Reference/classArLog.html#adb017560cb244d90ed80acc56586a451">ArLog::log</a>(<a class="codeRef" doxygen="Aria.tag:../Aria-Reference//" href="../Aria-Reference/classArLog.html#ac8cc0fb3aa323ab2a1c21340fdd1dce3a7040faf60eeb155eaa85d439b1066ca1">ArLog::Normal</a>, <span class="stringliteral">&quot;See the ARNL README.txt for more information&quot;</span>);</div>
<div class="line">  <a class="codeRef" doxygen="Aria.tag:../Aria-Reference//" href="../Aria-Reference/classArLog.html#adb017560cb244d90ed80acc56586a451">ArLog::log</a>(<a class="codeRef" doxygen="Aria.tag:../Aria-Reference//" href="../Aria-Reference/classArLog.html#ac8cc0fb3aa323ab2a1c21340fdd1dce3a7040faf60eeb155eaa85d439b1066ca1">ArLog::Normal</a>, <span class="stringliteral">&quot;&quot;</span>);</div>
<div class="line"></div>
<div class="line">  <span class="comment">// If you want MobileSim to try and load up the same map as you are</span></div>
<div class="line">  <span class="comment">// using in guiServer then uncomment out the next line and this object</span></div>
<div class="line">  <span class="comment">// will send a command to MobileSim to do so, but make sure you start </span></div>
<div class="line">  <span class="comment">// MobileSim from the Arnl/examples directory or use the --cwd option, </span></div>
<div class="line">  <span class="comment">// so that the map names used by MobileSim match  the map names used </span></div>
<div class="line">  <span class="comment">// by guiServer</span></div>
<div class="line">  <span class="comment">//ArSimMapSwitcher mapSwitcher(&amp;robot, &amp;arMap);</span></div>
<div class="line"></div>
<div class="line"></div>
<div class="line"></div>
<div class="line">  <span class="comment">/* Finally, get ready to run the robot: */</span></div>
<div class="line"></div>
<div class="line"></div>
<div class="line">  robot.<a name="a83"></a><a class="codeRef" doxygen="Aria.tag:../Aria-Reference//" href="../Aria-Reference/classArRobot.html#a403d9de010dc2b8d478cd0b14b2d9491">unlock</a>();</div>
<div class="line"></div>
<div class="line">  server.<a name="a84"></a><a class="codeRef" doxygen="ArNetworking.tag:../ArNetworking-Reference//" href="../ArNetworking-Reference/classArServerBase.html#a5261a8dcffd176fd268076c1913350ea">runAsync</a>();</div>
<div class="line"></div>
<div class="line">  <span class="comment">// Add a key handler (mostly so that on windows you can exit by pressing</span></div>
<div class="line">  <span class="comment">// escape.) This key handler, however, prevents this program from</span></div>
<div class="line">  <span class="comment">// running in the background (e.g. as a system daemon or run from </span></div>
<div class="line">  <span class="comment">// the shell with &quot;&amp;&quot;) -- it will lock up trying to read the keys; </span></div>
<div class="line">  <span class="comment">// remove this if you wish to be able to run this program in the background.</span></div>
<div class="line">  <a name="_a85"></a><a class="codeRef" doxygen="Aria.tag:../Aria-Reference//" href="../Aria-Reference/classArKeyHandler.html">ArKeyHandler</a> *keyHandler;</div>
<div class="line">  <span class="keywordflow">if</span> ((keyHandler = <a name="a86"></a><a class="codeRef" doxygen="Aria.tag:../Aria-Reference//" href="../Aria-Reference/classAria.html#aa7cb76c6ce9910f7705cf47ab7b5b8a8">Aria::getKeyHandler</a>()) == NULL)</div>
<div class="line">  {</div>
<div class="line">    keyHandler = <span class="keyword">new</span> <a class="codeRef" doxygen="Aria.tag:../Aria-Reference//" href="../Aria-Reference/classArKeyHandler.html">ArKeyHandler</a>;</div>
<div class="line">    <a name="a87"></a><a class="codeRef" doxygen="Aria.tag:../Aria-Reference//" href="../Aria-Reference/classAria.html#aad8a8dfd5cd3b9f0f24a95a987b879fd">Aria::setKeyHandler</a>(keyHandler);</div>
<div class="line">    robot.<a class="codeRef" doxygen="Aria.tag:../Aria-Reference//" href="../Aria-Reference/classArRobot.html#a5aecc7ac998c9a31b82fdb904efa8609">lock</a>();</div>
<div class="line">    robot.<a name="a88"></a><a class="codeRef" doxygen="Aria.tag:../Aria-Reference//" href="../Aria-Reference/classArRobot.html#ab4ea516667d2358f35b435d97b616ab1">attachKeyHandler</a>(keyHandler);</div>
<div class="line">    robot.<a class="codeRef" doxygen="Aria.tag:../Aria-Reference//" href="../Aria-Reference/classArRobot.html#a403d9de010dc2b8d478cd0b14b2d9491">unlock</a>();</div>
<div class="line">    printf(<span class="stringliteral">&quot;To exit, press escape.\n&quot;</span>);</div>
<div class="line">  }</div>
<div class="line"></div>
<div class="line">  robot.<a name="a89"></a><a class="codeRef" doxygen="Aria.tag:../Aria-Reference//" href="../Aria-Reference/group__easy.html#ga9dd850ba0d0ba7d6c303b8c28e3eab90">waitForRunExit</a>();</div>
<div class="line">  <a class="codeRef" doxygen="Aria.tag:../Aria-Reference//" href="../Aria-Reference/classAria.html#ac29a02c2e6637417bd7a5a5f1513da74">Aria::exit</a>(0);</div>
<div class="line">}</div>
</div><!-- fragment --> </div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated on Wed Nov 15 2017 13:30:19 for BaseArnl by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.1 </li>
  </ul>
</div>
</body>
</html>
