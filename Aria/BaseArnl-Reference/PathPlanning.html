<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<title>BaseArnl: Introduction to Path Planning</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">BaseArnl
   &#160;<span id="projectnumber">1.9.3</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.1 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="examples.html"><span>Examples</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('PathPlanning.html','');});
</script>
<div id="doc-content">
<div class="header">
  <div class="headertitle">
<div class="title">Introduction to Path Planning </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p><a class="el" href="classArPathPlanningTask.html" title="Task that performs path planning and path following in a seperate asynchronous thread.">ArPathPlanningTask</a> is the navigation component of ARNL. As an asynchronous task (thread) working with the ARIA robot control infrastructure, it's job is to plan the shortest and safest path for and then drive your mobile robot from its current position to any other reachable point in its mapped environment. <a class="el" href="classArPathPlanningTask.html" title="Task that performs path planning and path following in a seperate asynchronous thread.">ArPathPlanningTask</a> navigates to a goal using an <a class="elRef" doxygen="Aria.tag:../Aria-Reference//" href="../Aria-Reference/classArMap.html">ArMap</a> which contains sensable obstacles (walls, furniture, etc.), forbidden lines and areas, goal points, etc. The path planning task divides the map area into a fine grid (resolution set by PlanRes). It then searches this grid space to find a clear "global path" for the robot in that grid from the robot's current position to the goal while staying as far as feasible from the obstacles in the way. It then activates an <a class="elRef" doxygen="Aria.tag:../Aria-Reference//" href="../Aria-Reference/classArAction.html">ArAction</a> which drives the robot along the global path. <a class="el" href="classArPathPlanningTask.html" title="Task that performs path planning and path following in a seperate asynchronous thread.">ArPathPlanningTask</a> uses local replanning and the dynamic window method to avoid any unmapped obstacles. How it plans both the global and local paths may be adjusted by modifying the path planning parameters (see below).</p>
<p>For accurate navigation, we recommend that you use a localization task to keep the robots pose in the system true to its pose in the real world.</p>
<p>Example programs using path planning and localization are found in the Arnl/examples directory.</p>
<p><a class="el" href="classArPathPlanningTask.html" title="Task that performs path planning and path following in a seperate asynchronous thread.">ArPathPlanningTask</a> needs an instantiated and connected <a class="elRef" doxygen="Aria.tag:../Aria-Reference//" href="../Aria-Reference/classArRobot.html">ArRobot</a> object to hold the robot details, at least one range device (laser rangefinder, sonar, etc.), and <a class="elRef" doxygen="Aria.tag:../Aria-Reference//" href="../Aria-Reference/classArMap.html">ArMap</a> which holds a known map of the robot's operating environment (see expanded description of maps in ArLocalization and Arnl docs): Additional range devices can be added using the addRangeDevice() function.</p>
<pre>
  <a class="el" href="classArPathPlanningTask.html" title="Task that performs path planning and path following in a seperate asynchronous thread.">ArPathPlanningTask</a> myPathPlanningTask(myRobot, myLaser, mySonar, myMap);
  </pre><p>The path planning task uses an ARIA <a class="elRef" doxygen="Aria.tag:../Aria-Reference//" href="../Aria-Reference/classArActionGroup.html">ArActionGroup</a> to drive the robot (see getPathPlanActionGroup()): Your application sets the goal for the action (<a class="elRef" doxygen="Aria.tag:../Aria-Reference//" href="../Aria-Reference/classArPose.html">ArPose</a>) and a flag to decide if whether or not, once it arrives at the goal, your robot should turn to some particular heading. In its separate thread, <a class="el" href="classArPathPlanningTask.html" title="Task that performs path planning and path following in a seperate asynchronous thread.">ArPathPlanningTask</a> then plans the path, and activates its action to drive the robot, while also deactivating any other actions.</p>
<pre>
Example sets the goal pose to the robot's start up position and heading.
  myPathPlanningTask.pathPlanToPose(ArPose(0,0,0), true);
  </pre><p>You may also send the robot to a goal and related pose by name, as may be embedded into the <a class="elRef" doxygen="Aria.tag:../Aria-Reference//" href="../Aria-Reference/classArMap.html">ArMap</a> object&ndash;"Dock", for example. Simply pass the goal name string to the <a class="el" href="classArPathPlanningTask.html" title="Task that performs path planning and path following in a seperate asynchronous thread.">ArPathPlanningTask</a> via the pathPlanToGoal function:</p>
<pre>
Sends the robot to the dock.
  myPathPlanningTask.pathPlanToGoal("Dock");
  </pre><p>Four callback functions provide ways for your ARIA application to be notified and respond when the robot arrives at (addGoalDoneCB) or fails to successfully navigate (addGoalFailedCB) to the prescribed goal, if some other application event interrupts navigation (addGoalInterruptedCB), and a generic callback for any state change (addStateChangedCB). Be sure to remove each callback from the class when finished using their respective remGoalDoneCB, remGoalFailedCB, and remGoalInterruptCB methods:</p>
<pre>
  ArFunctor1&lt;ArPose&gt; goal_done(goalDone); // Define goalDone
  ArFunctor1&lt;ArPose&gt; goal_failed(goalFailed); // goalFailed
  ArFunctor1&lt;ArPose&gt; goal_interrupt(goalInterrupt); // and goalInterrupted handlers.
  myPathPlanningTask.addGoalDoneCB(&amp;goal_done); // Implement each as task callbacks
  myPathPlanningTask.addGoalFailedCB(&amp;goal_failed);
  myPathPlanningTask.addGoalInterruptedCB(&amp;goal_interrupt);
  </pre><p>Your application may get navigation status with the getState() method, which returns a value from an enumerated list of states (PathPlanningState), or get a textual description of the status using getStatusString or getFailureString (which are equivalent functions, and fill a char* buffer with text describing the current status, including failures).</p>
<pre>
  ArPathPlanningTask::PathPlanningState s = myPathPlanningTask.getState();
  char[512] text;
  myPathPlanningTask.getStatusString(text, sizeof(text));
  printf("Planning status: %s.\n", text);
  </pre><p>The path planning program can be customized for specific robots and specific applications through ARIA- and ARNL-specific methods as part of the program, or by modifying the contents of your robot's ARIA or ARNL parameters file, such as params/p3dx.p and params/arnl.p respectively. Versatile parameters include the dimensions and dynamics of obstacle avoidance and path tracking. Others include details about the robot size, the robot's dynamic parameters, including maximum linear and angular accelerations and velocities, and so forth.</p>
<p>Notes: Unlike the localization module, the path planning module physically moves the robot. Though the path planning module can safely navigate through a mapped area in the presence of unknown obstacles, you should be aware of its limitations:</p>
<ul>
<li>
<p class="startli">The robot can only perceive what can be seen by its sensors (laser and sonar). Any obstacle which cannot be sensed will not be avoided even if it is apparent to you. Any areas or boundaries which the robot should not cross such as drop offs in the floor, downstairs, no-go areas etc must be declared forbidden in the map before using it. (For example, table tops may not be sensed and might collide with the top of the robot if the areas below tables are not marked forbidden)</p>
<p class="endli"></p>
</li>
<li>
<p class="startli">The default parameters in arnl.p are meant to drive Pioneer class of robots in office type environments. If you are using a larger and heavier robot such as a PowerBot, remember to alter the default parameters.</p>
<p class="endli"></p>
</li>
<li>
<p class="startli">The most important parameters for path planning are MaxSpeed, PlanRes, PlanFreeSpace and CollisionRange. </p>
<p class="endli"></p>
</li>
<li>
<p class="startli">The parameter PlanRes sets the resolution of the map. For a robot such as patrolbot, a standard PlanRes of say 112.5 might not let it plan through tight doors a 1000mm wide. In such cases the PlanRes must be lowered to say 100mm. Reducing the PlanRes by a factor will increase computation by factor^2. If the computation takes more than the cycle time (default 100ms) robot motion will be affected. It might help to set the PlanRes to be rational fractions of the robot half width to allow more free space due to the nature of the path planning algorithm. </p>
<p class="endli"></p>
</li>
<li>
<p class="startli">The parameter PlanFreeSpace decides the distance the global path will keep the robot away from obstacles if there is free space available around that obstacle. </p>
<p class="endli"></p>
</li>
<li>
<p class="startli">Note that the accuracy and resolution of the sonar is orders worse than the laser. So in some cases such as in congested areas it might be useful to switch the sonar off by setting the useSonar parameter to false. </p>
<p class="endli"></p>
</li>
<li>
<p class="startli">The obstacle avoidance of the robot is designed to avoid obstacles that are relatively slow moving or static and can be sensed. Collision is inevitable if the obstacle rapidly approaches the robot or is not sensed by the robot sensors. Alter the clearance parameters and the speed parameters to suit your application. (Note, MobileRobots is not responsible for any damages or injuries resulting from the use of this software. Always test your software carefully in a controlled environment.)</p>
<p class="endli"></p>
</li>
</ul>
</div></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated on Wed Nov 15 2017 13:30:19 for BaseArnl by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.1 </li>
  </ul>
</div>
</body>
</html>
